<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Grow-with-Core - Login/Register</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the authentication page */
        body {
            font-family: "Inter", sans-serif;
            /* Deeper, more vibrant gradient background for a premium feel */
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #e0e0e0;
            padding: 1.5rem; /* Increased padding for better spacing on small screens */
            box-sizing: border-box;
            overflow-y: auto; /* Changed from hidden to auto to allow vertical scrolling */

            /* New: Subtle background animation */
            background-size: 200% 200%;
            animation: gradientMove 15s ease infinite alternate;
        }

        /* New: Keyframes for subtle background animation */
        @keyframes gradientMove {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }

        .auth-wrapper {
            display: flex;
            flex-direction: column; /* Stack on mobile */
            gap: 2rem; /* Space between auth container and about section */
            max-width: 900px; /* Max width for the entire wrapper */
            width: 100%;
            align-items: center; /* Center items horizontally */
        }

        .auth-container {
            background-color: #222222; /* Slightly darker container background */
            border-radius: 2.75rem; /* Even more rounded corners */
            /* More pronounced, multi-layered shadow for depth */
            box-shadow: 0 35px 80px rgba(0, 0, 0, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.05);
            padding: 3.5rem; /* Increased padding */
            max-width: 550px; /* Slightly wider max width */
            width: 100%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1); /* Slightly more defined border */
            position: relative; /* For potential pseudo-elements or absolute positioning */
            /* Removed overflow: hidden; to allow content within to scroll if needed, though body handles main scroll */
        }

        .auth-title {
            font-size: 2.8rem; /* Slightly larger title */
            font-weight: 800; /* Bolder */
            color: #c0d0e0; /* Softer blue-grey for titles */
            margin-bottom: 2.5rem; /* Increased margin */
            position: relative;
            padding-bottom: 0.85rem;
            letter-spacing: 0.06em; /* Slight letter spacing */
            text-shadow: 0 0 8px rgba(192, 208, 224, 0.2); /* Subtle glow for titles */
        }

        .auth-title::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 110px;
            height: 6px;
            /* Vibrant green gradient underline */
            background: linear-gradient(90deg, #5CB85C, #6FC06F);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(92, 184, 92, 0.6); /* Glow for the underline */
        }

        .form-section-title {
            font-size: 2rem; /* Adjusted size for form titles */
            font-weight: 700;
            color: #d0d0d0;
            margin-bottom: 1.8rem; /* Adjusted margin */
            text-shadow: 0 0 5px rgba(208, 208, 208, 0.1);
        }

        .form-group {
            margin-bottom: 1.8rem; /* Increased spacing between form groups */
            text-align: left;
            position: relative; /* For password toggle icon */
        }

        .form-group label {
            display: block;
            color: #c0d0c0; /* Softer label color */
            font-size: 1rem; /* Slightly larger label font */
            font-weight: 600;
            margin-bottom: 0.8rem; /* Increased space between label and input */
        }

        .form-input {
            background-color: #3a3a3a; /* Darker input background */
            border: 1px solid #666666; /* Darker, more defined border */
            color: #e0e0e0; /* Lighter text in inputs */
            border-radius: 0.85rem; /* More rounded inputs */
            padding: 1.1rem 1.4rem; /* Increased padding */
            width: 100%;
            box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.4); /* Deeper inner shadow */
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
            font-size: 1.05rem;
        }

        .form-input:focus {
            border-color: #5CB85C; /* Vibrant green focus border */
            box-shadow: 0 0 0 5px rgba(92, 184, 92, 0.6), inset 0 3px 6px rgba(0, 0, 0, 0.4); /* Green focus ring with inner shadow */
            outline: none;
            background-color: #3f3f3f; /* Slightly lighter on focus */
        }

        /* New: Input error styling */
        .form-input.error {
            border-color: #FF6B6B; /* Red border for error */
            box-shadow: 0 0 0 5px rgba(255, 107, 107, 0.3), inset 0 3px 6px rgba(0, 0, 0, 0.4);
        }
        .error-text {
            color: #FF6B6B;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            text-align: left;
        }

        /* Password Toggle Icon */
        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%; /* Adjusted to be relative to the input, not the label */
            transform: translateY(-50%);
            cursor: pointer;
            color: #90D0D0; /* Teal color for the icon */
            z-index: 10; /* Ensure it's above the input */
        }
        .password-toggle svg {
            width: 20px;
            height: 20px;
        }

        /* Password Strength Indicator */
        .password-strength-indicator {
            height: 8px;
            background-color: #4a4a4a;
            border-radius: 4px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            border-radius: 4px;
            transition: width 0.3s ease-in-out, background-color 0.3s ease-in-out;
        }

        .password-strength-text {
            font-size: 0.85rem;
            margin-top: 0.3rem;
            text-align: right;
            font-weight: 500;
        }

        .strength-weak .password-strength-bar { background-color: #FF6B6B; }
        .strength-medium .password-strength-bar { background-color: #FFD166; }
        .strength-strong .password-strength-bar { background-color: #76E076; }

        .strength-weak .password-strength-text { color: #FF6B6B; }
        .strength-medium .password-strength-text { color: #FFD166; }
        .strength-strong .password-strength-text { color: #76E076; }


        .btn-primary {
            /* More vibrant green gradient button with stronger shadow */
            background: linear-gradient(90deg, #4CAF50 0%, #5CB85C 100%);
            color: white;
            font-weight: 700;
            padding: 1.2rem 2.8rem; /* Larger padding for a more substantial button */
            border-radius: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.7); /* Stronger green shadow */
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.08em; /* More letter spacing */
            font-size: 1.15rem; /* Larger font size */
            position: relative;
            overflow: hidden;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            transition: all 0.4s ease-out;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
        }

        .btn-primary:hover::before {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .btn-primary:hover {
            transform: translateY(-5px); /* More pronounced lift */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.55), 0 0 15px rgba(76, 175, 80, 0.8); /* Stronger shadow with glow */
            filter: brightness(1.15); /* Slight brightness increase on hover */
        }

        .btn-primary:active {
            transform: translateY(0); /* Press effect */
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.4);
            filter: brightness(1);
        }

        .toggle-link {
            color: #90CAF9; /* Lighter blue for links */
            font-weight: 600;
            margin-top: 2rem; /* Increased margin */
            display: block;
            cursor: pointer;
            transition: color 0.2s ease, text-decoration 0.2s ease;
            font-size: 0.95rem; /* Slightly larger link font */
        }

        .toggle-link:hover {
            color: #BBDEFB; /* Even lighter on hover */
            text-decoration: underline;
        }

        .message-box {
            margin-top: 2rem; /* Increased margin */
            padding: 1.2rem; /* Increased padding */
            border-radius: 0.85rem;
            font-weight: 600;
            text-align: center;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
            font-size: 0.95rem; /* Slightly larger message font */
        }

        .message-box.success {
            background-color: rgba(92, 184, 92, 0.25);
            color: #76E076;
            border: 1px solid rgba(92, 184, 92, 0.5); /* Added border */
        }

        .message-box.error {
            background-color: rgba(255, 107, 107, 0.25);
            color: #FF6B6B;
            border: 1px solid rgba(255, 107, 107, 0.5); /* Added border */
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            width: 18px; /* Slightly larger spinner */
            height: 18px;
            animation: spin 1s linear infinite;
            margin-left: 10px; /* Increased margin */
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* About Section Specific Styles */
        .about-section {
            background-color: #222222;
            border-radius: 2.75rem;
            box-shadow: 0 35px 80px rgba(0, 0, 0, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.05);
            padding: 3.5rem;
            max-width: 550px;
            width: 100%;
            text-align: left; /* Align text left within about section */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .about-section-title {
            font-size: 2rem;
            font-weight: 700;
            color: #c0d0e0;
            margin-bottom: 1.8rem;
            text-align: center;
            position: relative;
            padding-bottom: 0.85rem;
            letter-spacing: 0.06em;
            text-shadow: 0 0 5px rgba(192, 208, 224, 0.2);
            display: flex; /* For icon alignment */
            align-items: center;
            justify-content: center;
        }

        .about-section-title svg {
            margin-right: 10px;
            color: #76E076; /* Green color for the icon */
            width: 30px;
            height: 30px;
        }

        .about-section p {
            font-size: 1rem;
            line-height: 1.6;
            color: #d0d0d0;
            margin-bottom: 1rem;
        }

        .about-section ul {
            list-style: none; /* Remove default list style */
            padding: 0;
            margin-bottom: 1.5rem;
        }

        .about-section ul li {
            background-color: #3a3a3a;
            border-radius: 0.6rem;
            padding: 0.8rem 1.2rem;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border: 1px solid rgba(255, 255, 255, 0.07);
        }

        .about-section ul li svg {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            color: #90D0D0; /* Teal color for list icons */
            margin-top: 2px; /* Align icon with text */
        }

        .about-section ul li strong {
            color: #e8e8e8;
        }

        /* Responsive adjustments */
        @media (min-width: 768px) {
            .auth-wrapper {
                flex-direction: row; /* Side-by-side on larger screens */
                justify-content: center;
                align-items: flex-start; /* Align to top */
            }
            .auth-container, .about-section {
                padding: 3.5rem; /* Consistent padding */
            }
        }

        @media (max-width: 640px) {
            .auth-container, .about-section {
                padding: 2rem; /* Smaller padding on very small screens */
                border-radius: 2rem;
            }
            .auth-title {
                font-size: 2.2rem;
                margin-bottom: 1.8rem;
            }
            .form-section-title, .about-section-title {
                font-size: 1.6rem;
                margin-bottom: 1.5rem;
            }
            .form-group {
                margin-bottom: 1.2rem;
            }
            .form-group label {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            .form-input {
                padding: 0.9rem 1.2rem;
                font-size: 0.95rem;
            }
            .btn-primary {
                padding: 1rem 2rem;
                font-size: 1rem;
            }
            .toggle-link {
                margin-top: 1.5rem;
                font-size: 0.85rem;
            }
            .message-box {
                margin-top: 1.5rem;
                padding: 1rem;
                font-size: 0.85rem;
            }
            .loading-spinner {
                width: 14px;
                height: 14px;
            }
            .about-section ul li {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
            .about-section-title svg {
                width: 24px;
                height: 24px;
            }
        }

        /* New: Form animation for toggling */
        .form-fade-enter-active, .form-fade-leave-active {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .form-fade-enter-from, .form-fade-leave-to {
            opacity: 0;
            transform: translateY(10px);
        }

        /* Policy Modal Styles */
        .policy-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .policy-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .policy-modal-content {
            background-color: #222222;
            border-radius: 1.5rem;
            padding: 2.5rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .policy-modal-overlay.show .policy-modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .policy-modal-content h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #76E076;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .policy-modal-content p {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #d0d0d0;
            margin-bottom: 1rem;
        }

        .policy-modal-content ul {
            list-style: none; /* Changed from disc to none for custom icons */
            padding: 0;
            margin-bottom: 1.5rem;
            color: #d0d0d0;
        }

        .policy-modal-content ul li {
            margin-bottom: 0.8rem; /* Increased spacing between list items */
            font-size: 0.9rem;
            display: flex; /* For icon alignment */
            align-items: flex-start;
            gap: 0.8rem;
            background-color: #3a3a3a; /* Background for list items */
            border-radius: 0.6rem;
            padding: 0.8rem 1.2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border: 1px solid rgba(255, 255, 255, 0.07);
        }
        .policy-modal-content ul li svg {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            color: #90D0D0; /* Teal color for list icons */
            margin-top: 2px; /* Align icon with text */
        }

        .policy-buttons {
            display: flex;
            justify-content: space-around;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .policy-buttons button {
            flex: 1;
            padding: 0.9rem 1.5rem;
            border-radius: 0.8rem;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
            font-size: 1rem;
        }

        .policy-buttons .btn-agree {
            background: linear-gradient(90deg, #4CAF50, #5CB85C);
            color: white;
            border: none;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.5);
        }

        .policy-buttons .btn-agree:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.7);
        }

        .policy-buttons .btn-disagree {
            background-color: #4a4a4a;
            color: #e0e0e0;
            border: 1px solid #666666;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .policy-buttons .btn-disagree:hover {
            background-color: #5a5a5a;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        /* New Loading Overlay Styles */
        .loading-overlay-full {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85); /* Darker overlay */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1001; /* Above policy modal */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .loading-overlay-full.show {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner-large {
            border: 6px solid rgba(255, 255, 255, 0.3);
            border-top: 6px solid #76E076; /* Green spinner */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1.2s linear infinite;
            margin-bottom: 20px;
        }
        .loading-overlay-full p {
            margin-top: 1rem;
            font-size: 1.2rem;
            color: #d0d0d0;
        }

        /* Forgot Password Modal Styles */
        .forgot-password-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .forgot-password-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .forgot-password-modal-content {
            background-color: #222222;
            border-radius: 1.5rem;
            padding: 2.5rem;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .forgot-password-modal-overlay.show .forgot-password-modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .forgot-password-modal-content h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #90CAF9; /* Blue color for forgot password title */
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .forgot-password-modal-content .form-group {
            margin-bottom: 1.5rem;
        }
        .forgot-password-modal-content .btn-primary {
            margin-top: 1rem;
        }
        .forgot-password-modal-content .close-modal-btn {
            background: none;
            border: none;
            color: #d0d0d0;
            font-size: 1rem;
            margin-top: 1rem;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .forgot-password-modal-content .close-modal-btn:hover {
            color: #fff;
        }

        /* Social Login Buttons */
        .social-login-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .social-login-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.8rem 1.5rem;
            border-radius: 0.85rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .social-login-button svg {
            margin-right: 0.75rem;
            width: 20px;
            height: 20px;
        }

        .social-login-button.google {
            background-color: #4285F4; /* Google Blue */
            color: white;
        }
        .social-login-button.google:hover {
            background-color: #357ae8;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(66, 133, 244, 0.4);
        }

        .social-login-button.facebook {
            background-color: #1877F2; /* Facebook Blue */
            color: white;
        }
        .social-login-button.facebook:hover {
            background-color: #166fe5;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(24, 119, 242, 0.4);
        }
    </style>
</head>
<body>
    <div class="auth-wrapper">
        <div class="auth-container">
            <h1 class="auth-title">Grow-with-Core</h1>

            <!-- Login Form -->
            <div id="loginForm">
                <h2 class="form-section-title">Login to Your Account</h2>
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email" autocomplete="email">
                    <p id="loginEmailError" class="error-text hidden" aria-live="polite"></p>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" autocomplete="current-password">
                    <span class="password-toggle" id="toggleLoginPassword">
                        <!-- Eye icon for show/hide password -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                    </span>
                    <p id="loginPasswordError" class="error-text hidden" aria-live="polite"></p>
                </div>
                <!-- Remember Me Checkbox -->
                <div class="form-group flex items-center justify-start mb-4">
                    <input type="checkbox" id="rememberMe" class="mr-2 rounded text-green-500 focus:ring-green-500">
                    <label for="rememberMe" class="text-sm font-medium text-gray-400">Remember me</label>
                </div>

                <button id="loginBtn" class="btn-primary">
                    <span>Login</span>
                </button>
                <p id="loginMessage" class="message-box hidden" aria-live="polite"></p>
                <a href="#" id="showRegisterLink" class="toggle-link">Don't have an account? Register here.</a>
                <a href="#" id="forgotPasswordLink" class="toggle-link mt-4 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-help-circle mr-2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
                    Forgot Password?
                </a>

                <!-- Social Login Placeholders -->
                <div class="social-login-buttons">
                    <button class="social-login-button google">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24px" height="24px"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.655 5.715-6.796 9.886-13.303 9.886c-7.332 0-13.333-5.934-13.333-13.266c0-7.332 6.001-13.333 13.333-13.333c3.911 0 7.345 1.609 9.851 4.149L38.59 7.74C34.217 3.752 29.026 2 24 2C11.851 2 2 11.851 2 24s9.851 22 22 22s22-9.851 22-22c0-1.78-.292-3.52-.839-5.187z"/><path fill="#FF3D00" d="M6.306 14.691L14.041 21.41H24V14H14.041z"/><path fill="#4CAF50" d="M24 44c6.952 0 12.916-3.324 16.608-8.081L31.606 28H24v8z"/><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-1.655 5.715-6.796 9.886-13.303 9.886c-7.332 0-13.333-5.934-13.333-13.266c0-7.332 6.001-13.333 13.333-13.333c3.911 0 7.345 1.609 9.851 4.149L38.59 7.74C34.217 3.752 29.026 2 24 2C11.851 2 2 11.851 2 24s9.851 22 22 22s22-9.851 22-22c0-1.78-.292-3.52-.839-5.187z"/></svg>
                        Login with Google
                    </button>
                    <button class="social-login-button facebook">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px" fill="currentColor"><path d="M12 2C6.477 2 2 6.477 2 12c0 5.016 3.657 9.18 8.438 9.879V14.75H7.75V12h2.688V9.563c0-2.652 1.59-4.138 4.016-4.138c1.148 0 2.375.203 2.375.203V7.5h-1.219c-1.313 0-1.719.813-1.719 1.656V12h2.938l-.469 2.75H14.188v7.129C18.343 21.18 22 17.016 22 12c0-5.523-4.477-10-10-10z"/></svg>
                        Login with Facebook
                    </button>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="hidden">
                <h2 class="form-section-title">Create New Account</h2>
                <div class="form-group">
                    <label for="registerEmail">Email Address</label>
                    <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email" autocomplete="email">
                    <p id="registerEmailError" class="error-text hidden" aria-live="polite"></p>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" class="form-input" placeholder="Choose a password" autocomplete="new-password">
                    <span class="password-toggle" id="toggleRegisterPassword">
                        <!-- Eye icon for show/hide password -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                    </span>
                    <p id="registerPasswordError" class="error-text hidden" aria-live="polite"></p>
                    <div class="password-strength-indicator">
                        <div id="passwordStrengthBar" class="password-strength-bar"></div>
                    </div>
                    <p id="passwordStrengthText" class="password-strength-text"></p>
                </div>
                <button id="registerBtn" class="btn-primary">
                    <span>Register</span>
                </button>
                <p id="registerMessage" class="message-box hidden" aria-live="polite"></p>
                <a href="#" id="showLoginLink" class="toggle-link">Already have an account? Login here.</a>
            </div>
        </div>

        <!-- About Section -->
        <div class="about-section">
            <h2 class="about-section-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                About Grow-with-Core
            </h2>
            <p>Welcome to Grow-with-Core, your personal investment simulation platform designed to help you explore and understand the dynamics of financial growth. We provide a safe and interactive environment for you to simulate investments, track your portfolio, and learn about potential returns without any real-world financial risk.</p>
            <p>Our mission is to empower individuals with the knowledge and confidence to make informed investment decisions. Grow-with-Core simplifies complex financial concepts, making investment planning accessible and engaging for everyone.</p>

            <!-- New Content: Grow with CORE: Your Path to Real Asset Investments -->
            <h3 class="text-xl font-semibold text-gray-200 mt-6 mb-3 text-center">Grow with CORE: Your Path to Real Asset Investments 🏛</h3>
            <p class="text-base text-gray-300 mb-4">Grow with CORE is your direct link to tangible, real-world investment opportunities 🤝. We're dedicated to helping you cultivate your financial future by connecting you with essential and sustainable sectors 🌱. Forget the abstract world of stocks and bonds – we bring you down to earth, enabling you to invest in assets you can understand and truly watch grow.</p>
            <p class="text-base text-gray-300 mb-4">Through Grow with CORE, you can invest in vital, foundational industries:</p>

            <ul class="mb-4">
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wheat"><path d="M2 22s1-4 4-4 4 4 4 4 1-4 4-4 4 4 4 4 1-4 4-4"/><path d="M7 18c-1-1-1-2 0-3c1-1 2-1 3-2"/><path d="M10 16c-1-1-1-2 0-3c1-1 2-1 3-2"/><path d="M13 14c-1-1-1-2 0-3c1-1 2-1 3-2"/></svg>
                    <strong>Sustainable Agriculture 🌾:</strong> Put your money into the very ground beneath our feet. This includes farms, crops, and cutting-edge modern farming technology designed for long-term sustainability and yield. Investing in agriculture means contributing to food security and a greener future.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-beef"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z"/><path d="M12 12c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"/><path d="M12 16c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"/><path d="M12 20c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"/></svg>
                    <strong>Thriving Livestock 🐄:</strong> Invest in the growth and well-being of farm animals, a crucial component of the agricultural ecosystem. This sector supports ethical practices and contributes to a robust food supply chain.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplet"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.32 0L12 2.69z"/></svg>
                    <strong>Essential Resources 💧:</strong> Fund projects related to vital natural resources that are indispensable for daily life and industrial progress. This could include water management, renewable energy initiatives, or other fundamental resources that underpin global economies.
                </li>
            </ul>

            <p class="text-base text-gray-300 mb-4">Our main goal is simple: to help you build your wealth 💰 in a meaningful and impactful way. By investing directly in these fundamental, real-world sectors, you can watch your financial future grow 🚀 as these tangible assets develop, produce, and generate sustainable returns. It's about more than just numbers on a screen; it's about investing in the very things that sustain life and economies.</p>

            <p class="text-base text-gray-300 mb-4">In simple terms, Grow with CORE helps you invest your money 💸 in the ground, so you can watch it grow into a tree! 🌳 We provide the platform and the opportunities; you provide the vision for your financial growth.</p>

            <p class="text-base text-gray-300 font-semibold text-center mt-6">Ready to plant the seeds of your financial future with Grow with CORE?</p>
            <!-- End New Content -->

            <h3>Key Features:</h3>
            <ul>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trending-up"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
                    <strong>Simulated Investments:</strong> Explore various investment types and see how they perform over time with realistic, simulated market data.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pie-chart"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
                    <strong>Portfolio Tracking:</strong> Monitor your simulated portfolio's performance, track profits, and understand your asset allocation at a glance.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-target"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                    <strong>Goal Setting:</strong> Set financial goals and track your progress, helping you visualize your journey towards your aspirations.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-newspaper"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h2"/><path d="M10 12h8"/><path d="M10 16h8"/><path d="M10 8h8"/></svg>
                    <strong>Daily Insights:</strong> Stay informed with simulated daily market insights and tips to enhance your understanding of financial trends.
                </li>
            </ul>

            <h3>How to Use:</h3>
            <ul>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-plus"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" x2="19" y1="8" y2="14"/><line x1="22" x2="16" y1="11" y2="11"/></svg>
                    <strong>Create Account:</strong> If you're new, click "Register here". Enter your email and a password (minimum 6 characters) to create your account.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-in"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" x2="3" y1="12" y2="12"/></svg>
                    <strong>Login:</strong> Use your registered email and password. Upon successful login, you'll be redirected to your personalized dashboard at <code>addup.html</code>.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                    <strong>Data Persistence:</strong> Your progress and investment data are saved within your browser. This ensures your information is available when you return to the application.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1.3.5 2.6 1.5 3.5.8.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 22v-4"/></svg>
                    <strong class="text-blue-400">Learning & Exploration:</strong> Grow-with-Core is designed as an educational tool. Dive in, experiment with different strategies, and discover the potential of smart investing in a risk-free environment.
                </li>
            </ul>
        </div>
    </div>

    <!-- Policy Agreement Modal -->
    <div id="policyModalOverlay" class="policy-modal-overlay">
        <div class="policy-modal-content">
            <h3>Your Journey with Grow-with-Core</h3>
            <p>Welcome to Grow-with-Core! We're thrilled to have you join our community. Before you dive into your financial exploration, please take a moment to understand how our platform works. By proceeding, you're agreeing to these guiding principles:</p>
            <ul>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-graduation-cap"><path d="M21.43 14.57l-1.89-1.89a1.99 1.99 0 0 0-2.82 0L15 14.57l-1.89-1.89a1.99 1.99 0 0 0-2.82 0L9 14.57l-1.89-1.89a1.99 1.99 0 0 0-2.82 0L3 14.57V10a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v4.57z"/><path d="M12 4V2"/><path d="M5 10.5V7.5C5 6.67 5.67 6 6.5 6H17.5C18.33 6 19 6.67 19 7.5V10.5"/></svg>
                    <strong>A Safe Learning Space:</strong> Grow-with-Core is your dedicated environment for financial education and simulation. Here, you can freely experiment with investment strategies and observe market dynamics without any real financial risk or actual money transactions. It's all about learning and building your expertise!
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1.3.5 2.6 1.5 3.5.8.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 22v-4"/></svg>
                    <strong>Empowering Insights:</strong> The data, strategies, and simulated results within Grow-with-Core are powerful tools for understanding financial concepts. While they offer valuable insights for your learning journey, they are purely illustrative and do not constitute professional financial advice. For real-world investment decisions, we always recommend consulting with a certified financial expert.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-database"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5V19A9 3 0 0 0 21 19V5"/><path d="M3 12A9 3 0 0 0 21 12"/></svg>
                    <strong>Seamless Progress Tracking:</strong> Your simulated investment progress and account details are securely saved directly within your browser. This convenient local storage ensures that your learning journey seamlessly continues right where you left off on this device. Please note that clearing your browser's data will reset your Grow-with-Core progress.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    <strong>Need a Hand? We're Here!</strong> Your successful learning journey is our priority. If you encounter any difficulties, have questions, or need a little extra guidance, our support team is ready to assist you. Connect with us instantly on <a href="https://wa.me/2349041994731" target="_blank" class="text-green-400 font-bold hover:underline">WhatsApp</a>.
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M21 12a9 9 0 0 0-9-9c-7.2 0-9 1.8-9 9s1.8 9 9 9c1.67 0 3.24-.35 4.7-.98"/><path d="M17 2v5h5"/></svg>
                    <strong>Evolving with You:</strong> We are continuously improving Grow-with-Core to provide the best possible learning experience. We may introduce new features and content, and update these terms, to enhance your journey. Your continued engagement signifies your acceptance of these exciting developments.
                </li>
            </ul>
            <p>By clicking "I Agree," you confirm your understanding and acceptance of these terms. Get ready to explore the world of investments with confidence!</p>
            <div class="policy-buttons">
                <button id="agreePolicyBtn" class="btn-agree">I Agree</button>
                <button id="disagreePolicyBtn" class="btn-disagree">I Disagree</button>
            </div>
            <p id="policyMessage" class="message-box hidden" aria-live="polite"></p>
        </div>
    </div>

    <!-- Full-screen Loading Overlay -->
    <div id="loadingOverlayFull" class="loading-overlay-full">
        <div class="loading-spinner-large"></div>
        <p>Preparing your Grow-with-Core experience...</p>
        <p class="text-sm mt-2 text-gray-400">Please wait a moment while we set things up.</p>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModalOverlay" class="forgot-password-modal-overlay">
        <div class="forgot-password-modal-content">
            <h3 id="forgotPasswordModalTitle">Reset Your Password</h3>
            <p class="text-sm text-gray-400 mb-4 text-center">Enter your registered email to set a new password.</p>

            <div id="forgotPasswordEmailSection">
                <div class="form-group">
                    <label for="forgotPasswordEmail">Email Address</label>
                    <input type="email" id="forgotPasswordEmail" class="form-input" placeholder="Enter your registered email" autocomplete="email">
                    <p id="forgotPasswordEmailError" class="error-text hidden" aria-live="polite"></p>
                </div>
                <button id="submitForgotPasswordEmailBtn" class="btn-primary">
                    <span>Submit Email</span>
                </button>
            </div>

            <div id="setNewPasswordSection" class="hidden">
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="form-input" placeholder="Enter new password" autocomplete="new-password">
                    <span class="password-toggle" id="toggleNewPassword">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                    </span>
                    <p id="newPasswordError" class="error-text hidden" aria-live="polite"></p>
                </div>
                <div class="form-group">
                    <label for="confirmNewPassword">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" class="form-input" placeholder="Confirm new password" autocomplete="new-password">
                    <span class="password-toggle" id="toggleConfirmNewPassword">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                    </span>
                    <p id="confirmNewPasswordError" class="error-text hidden" aria-live="polite"></p>
                </div>
                <button id="setNewPasswordBtn" class="btn-primary">
                    <span>Set New Password</span>
                </button>
            </div>
            <p id="forgotPasswordMessage" class="message-box hidden" aria-live="polite"></p>
            <button id="closeForgotPasswordModalBtn" class="close-modal-btn">Close</button>
        </div>
    </div>

    <script>
        // IMPORTANT SECURITY NOTE:
        // Storing user credentials (even hashed) directly in localStorage is HIGHLY INSECURE
        // for a real-world application. This implementation is provided to meet your specific
        // request for local storage persistence without a backend, but it is crucial to
        // understand its limitations. For production, a secure backend with proper authentication
        // and database storage (like Firebase) would be essential. Never use this approach
        // for sensitive user data in a live environment.

        // DOM Elements
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');

        const loginEmailInput = document.getElementById('loginEmail');
        const loginPasswordInput = document.getElementById('loginPassword');
        const loginBtn = document.getElementById('loginBtn');
        const loginMessage = document.getElementById('loginMessage');
        const loginEmailError = document.getElementById('loginEmailError');
        const loginPasswordError = document.getElementById('loginPasswordError');

        const registerEmailInput = document.getElementById('registerEmail');
        const registerPasswordInput = document.getElementById('registerPassword');
        const registerBtn = document.getElementById('registerBtn');
        const registerMessage = document.getElementById('registerMessage');
        const registerEmailError = document.getElementById('registerEmailError');
        const registerPasswordError = document.getElementById('registerPasswordError');
        const passwordStrengthBar = document.getElementById('passwordStrengthBar');
        const passwordStrengthText = document.getElementById('passwordStrengthText');


        const showRegisterLink = document.getElementById('showRegisterLink');
        const showLoginLink = document.getElementById('showLoginLink');

        // Password Toggle Elements
        const toggleLoginPassword = document.getElementById('toggleLoginPassword');
        const toggleRegisterPassword = document.getElementById('toggleRegisterPassword');

        // Policy Modal Elements
        const policyModalOverlay = document.getElementById('policyModalOverlay');
        const agreePolicyBtn = document.getElementById('agreePolicyBtn');
        const disagreePolicyBtn = document.getElementById('disagreePolicyBtn');
        const policyMessage = document.getElementById('policyMessage');

        // Full-screen Loading Overlay Element
        const loadingOverlayFull = document.getElementById('loadingOverlayFull');

        // Forgot Password Modal Elements
        const forgotPasswordLink = document.getElementById('forgotPasswordLink');
        const forgotPasswordModalOverlay = document.getElementById('forgotPasswordModalOverlay');
        const closeForgotPasswordModalBtn = document.getElementById('closeForgotPasswordModalBtn');
        const forgotPasswordEmailSection = document.getElementById('forgotPasswordEmailSection');
        const setNewPasswordSection = document.getElementById('setNewPasswordSection');
        const forgotPasswordEmail = document.getElementById('forgotPasswordEmail');
        const submitForgotPasswordEmailBtn = document.getElementById('submitForgotPasswordEmailBtn');
        const newPassword = document.getElementById('newPassword');
        const confirmNewPassword = document.getElementById('confirmNewPassword');
        const setNewPasswordBtn = document.getElementById('setNewPasswordBtn');
        const forgotPasswordMessage = document.getElementById('forgotPasswordMessage');
        const forgotPasswordEmailError = document.getElementById('forgotPasswordEmailError');
        const newPasswordError = document.getElementById('newPasswordError');
        const confirmNewPasswordError = document.getElementById('confirmNewPasswordError');
        const toggleNewPassword = document.getElementById('toggleNewPassword');
        const toggleConfirmNewPassword = document.getElementById('toggleConfirmNewPassword');

        // Remember Me Checkbox
        const rememberMeCheckbox = document.getElementById('rememberMe');


        /**
         * Toggles the visibility of a password input field.
         * @param {HTMLElement} input The password input element.
         * @param {HTMLElement} toggleIcon The SVG icon element.
         */
        function togglePasswordVisibility(input, toggleIcon) {
            if (input.type === 'password') {
                input.type = 'text';
                toggleIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye-off"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-10-7-10-7a18.06 18.06 0 0 1 5.34-4.34M7.37 7.37A10.07 10.07 0 0 1 12 4c7 0 10 7 10 7a18.06 18.06 0 0 1-2.51 3.15"/><path d="M12 12v.01"/><path d="M6 6l12 12"/></svg>`;
            } else {
                input.type = 'password';
                toggleIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>`;
            }
        }

        // Add event listeners for password toggles
        toggleLoginPassword.addEventListener('click', () => togglePasswordVisibility(loginPasswordInput, toggleLoginPassword));
        toggleRegisterPassword.addEventListener('click', () => togglePasswordVisibility(registerPasswordInput, toggleRegisterPassword));
        toggleNewPassword.addEventListener('click', () => togglePasswordVisibility(newPassword, toggleNewPassword));
        toggleConfirmNewPassword.addEventListener('click', () => togglePasswordVisibility(confirmNewPassword, toggleConfirmNewPassword));


        /**
         * Displays a message in the specified message box.
         * @param {HTMLElement} messageBox The message box element.
         * @param {string} message The message text.
         * @param {string} type 'success' or 'error'.
         */
        function showMessage(messageBox, message, type) {
            messageBox.textContent = message;
            messageBox.classList.remove('hidden', 'success', 'error');
            messageBox.classList.add(type);
            // Announce message for screen readers
            messageBox.setAttribute('aria-live', 'assertive');
            setTimeout(() => {
                messageBox.classList.add('hidden');
                messageBox.removeAttribute('aria-live');
            }, 3000); // Hide message after 3 seconds
        }

        /**
         * Shows an input-specific error message.
         * @param {HTMLElement} inputElement The input field.
         * @param {HTMLElement} errorElement The paragraph to display the error.
         * @param {string} message The error message.
         */
        function showInputError(inputElement, errorElement, message) {
            inputElement.classList.add('error');
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
        }

        /**
         * Clears an input-specific error message.
         * @param {HTMLElement} inputElement The input field.
         * @param {HTMLElement} errorElement The paragraph displaying the error.
         */
        function clearInputError(inputElement, errorElement) {
            inputElement.classList.remove('error');
            errorElement.classList.add('hidden');
            errorElement.textContent = '';
        }

        /**
         * Shows a loading state for a button.
         * @param {HTMLElement} button The button element.
         * @param {string} loadingText The text to display while loading.
         */
        function startLoading(button, loadingText = 'Processing...') {
            button.disabled = true;
            button.querySelector('span').textContent = loadingText;
            const spinner = document.createElement('div');
            spinner.classList.add('loading-spinner');
            button.appendChild(spinner);
        }

        /**
         * Hides the loading state for a button.
         * @param {HTMLElement} button The button element.
         * @param {string} originalText The original text of the button.
         */
        function stopLoading(button, originalText) {
            button.disabled = false;
            button.querySelector('span').textContent = originalText;
            const spinner = button.querySelector('.loading-spinner');
            if (spinner) {
                spinner.remove();
            }
        }

        /**
         * Toggles between login and register forms with a fade animation.
         * @param {HTMLElement} formToShow The form element to display.
         * @param {HTMLElement} formToHide The form element to hide.
         */
        function toggleForm(formToShow, formToHide) {
            formToHide.classList.add('form-fade-leave-active');
            formToHide.classList.add('form-fade-leave-to');

            setTimeout(() => {
                formToHide.classList.add('hidden');
                formToHide.classList.remove('form-fade-leave-active', 'form-fade-leave-to');

                formToShow.classList.remove('hidden');
                formToShow.classList.add('form-fade-enter-active');
                formToShow.classList.add('form-fade-enter-from');

                setTimeout(() => {
                    formToShow.classList.remove('form-fade-enter-from');
                }, 10); // Small delay to trigger transition

                setTimeout(() => {
                    formToShow.classList.remove('form-fade-enter-active');
                }, 300); // Match transition duration
            }, 300); // Match transition duration
        }

        /**
         * Displays the policy agreement modal.
         */
        function showPolicyAgreement() {
            // Check if policy has already been agreed to by this user
            const currentUserEmail = localStorage.getItem('currentUserEmail');
            if (currentUserEmail && localStorage.getItem(`policyAgreed_${currentUserEmail}`) === 'true') {
                // If agreed, redirect directly
                window.location.href = 'addup.html';
                return;
            }

            // Otherwise, show the modal
            policyModalOverlay.classList.add('show');
            policyMessage.classList.add('hidden'); // Ensure message is hidden on show
        }

        /**
         * Hides the policy agreement modal.
         */
        function hidePolicyAgreement() {
            policyModalOverlay.classList.remove('show');
        }

        /**
         * Shows the full-screen loading overlay.
         */
        function showLoadingOverlayFull() {
            loadingOverlayFull.classList.add('show');
        }

        /**
         * Hides the full-screen loading overlay.
         */
        function hideLoadingOverlayFull() {
            loadingOverlayFull.classList.remove('show');
        }

        /**
         * Shows the forgot password modal.
         */
        function showForgotPasswordModal() {
            forgotPasswordModalOverlay.classList.add('show');
            forgotPasswordEmailSection.classList.remove('hidden');
            setNewPasswordSection.classList.add('hidden');
            forgotPasswordEmail.value = '';
            newPassword.value = '';
            confirmNewPassword.value = '';
            clearInputError(forgotPasswordEmail, forgotPasswordEmailError);
            clearInputError(newPassword, newPasswordError);
            clearInputError(confirmNewPassword, confirmNewPasswordError);
            forgotPasswordMessage.classList.add('hidden'); // Hide any previous messages
        }

        /**
         * Hides the forgot password modal.
         */
        function hideForgotPasswordModal() {
            forgotPasswordModalOverlay.classList.remove('show');
        }

        /**
         * Validates email format.
         * @param {string} email The email string to validate.
         * @returns {boolean} True if valid, false otherwise.
         */
        function isValidEmail(email) {
            return /\S+@\S+\.\S+/.test(email);
        }

        /**
         * Checks password strength and updates indicator.
         * @param {string} password The password string.
         */
        function checkPasswordStrength(password) {
            let strength = 0;
            if (password.length > 5) strength++;
            if (password.length > 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;

            let width = 0;
            let text = '';
            let className = '';

            if (strength <= 1) {
                width = 25;
                text = 'Weak';
                className = 'strength-weak';
            } else if (strength === 2) {
                width = 50;
                text = 'Medium';
                className = 'strength-medium';
            } else if (strength >= 3) {
                width = 100;
                text = 'Strong';
                className = 'strength-strong';
            }

            passwordStrengthBar.style.width = `${width}%`;
            passwordStrengthText.textContent = text;

            // Remove all strength classes first
            passwordStrengthBar.parentElement.classList.remove('strength-weak', 'strength-medium', 'strength-strong');
            passwordStrengthText.classList.remove('strength-weak', 'strength-medium', 'strength-strong');

            // Add the current strength class
            if (className) {
                passwordStrengthBar.parentElement.classList.add(className);
                passwordStrengthText.classList.add(className);
            }
        }


        // Event Listeners for form toggling
        showRegisterLink.addEventListener('click', (e) => {
            e.preventDefault();
            toggleForm(registerForm, loginForm);
            loginMessage.classList.add('hidden'); // Hide any previous login messages
            registerMessage.classList.add('hidden'); // Clear register message on toggle
            loginEmailInput.value = ''; // Clear inputs on toggle
            loginPasswordInput.value = '';
            clearInputError(loginEmailInput, loginEmailError);
            clearInputError(loginPasswordInput, loginPasswordError);
            // Reset password strength indicator when switching to register form
            checkPasswordStrength('');
        });

        showLoginLink.addEventListener('click', (e) => {
            e.preventDefault();
            toggleForm(loginForm, registerForm);
            registerMessage.classList.add('hidden'); // Hide any previous register messages
            loginMessage.classList.add('hidden'); // Clear login message on toggle
            registerEmailInput.value = ''; // Clear inputs on toggle
            registerPasswordInput.value = '';
            clearInputError(registerEmailInput, registerEmailError);
            clearInputError(registerPasswordInput, registerPasswordError);
        });

        // Real-time email validation for login
        loginEmailInput.addEventListener('input', () => {
            clearInputError(loginEmailInput, loginEmailError);
            if (loginEmailInput.value.trim() && !isValidEmail(loginEmailInput.value.trim())) {
                showInputError(loginEmailInput, loginEmailError, 'Please enter a valid email address.');
            }
        });

        // Real-time email validation for register
        registerEmailInput.addEventListener('input', () => {
            clearInputError(registerEmailInput, registerEmailError);
            if (registerEmailInput.value.trim() && !isValidEmail(registerEmailInput.value.trim())) {
                showInputError(registerEmailInput, registerEmailError, 'Please enter a valid email address.');
            }
        });

        // Password Strength Indicator for register password
        registerPasswordInput.addEventListener('input', (e) => {
            clearInputError(registerPasswordInput, registerPasswordError);
            checkPasswordStrength(e.target.value);
        });


        // Register Button Logic
        registerBtn.addEventListener('click', () => {
            const email = registerEmailInput.value.trim();
            const password = registerPasswordInput.value.trim();

            let hasError = false;

            // Clear previous errors
            clearInputError(registerEmailInput, registerEmailError);
            clearInputError(registerPasswordInput, registerPasswordError);

            if (!email) {
                showInputError(registerEmailInput, registerEmailError, 'Email address is required.');
                hasError = true;
            } else if (!isValidEmail(email)) {
                showInputError(registerEmailInput, registerEmailError, 'Please enter a valid email address.');
                hasError = true;
            }

            if (!password) {
                showInputError(registerPasswordInput, registerPasswordError, 'Password is required.');
                hasError = true;
            } else if (password.length < 6) {
                showInputError(registerPasswordInput, registerPasswordError, 'Password must be at least 6 characters long.');
                hasError = true;
            }

            if (hasError) {
                showMessage(registerMessage, 'Please correct the errors above.', 'error');
                return;
            }

            startLoading(registerBtn, 'Registering...');

            // Simulate API call delay
            setTimeout(() => {
                const existingUser = localStorage.getItem(`user_${email}`);
                if (existingUser) {
                    showMessage(registerMessage, 'Account with this email already exists.', 'error');
                    showInputError(registerEmailInput, registerEmailError, 'This email is already registered.');
                    stopLoading(registerBtn, 'Register');
                } else {
                    // Store user credentials in localStorage
                    localStorage.setItem(`user_${email}`, JSON.stringify({ email, password }));
                    showMessage(registerMessage, 'Account created successfully! You can now log in.', 'success');
                    stopLoading(registerBtn, 'Register');
                    // Optionally switch to login form after successful registration
                    setTimeout(() => {
                        toggleForm(loginForm, registerForm);
                        loginEmailInput.value = email; // Pre-fill login email
                        registerEmailInput.value = ''; // Clear register form
                        registerPasswordInput.value = '';
                    }, 1500);
                }
            }, 1000);
        });

        // Login Button Logic
        loginBtn.addEventListener('click', () => {
            const email = loginEmailInput.value.trim();
            const password = loginPasswordInput.value.trim();
            const rememberMe = rememberMeCheckbox.checked;

            let hasError = false;

            // Clear previous errors
            clearInputError(loginEmailInput, loginEmailError);
            clearInputError(loginPasswordInput, loginPasswordError);

            if (!email) {
                showInputError(loginEmailInput, loginEmailError, 'Email address is required.');
                hasError = true;
            } else if (!isValidEmail(email)) {
                showInputError(loginEmailInput, loginEmailError, 'Please enter a valid email address.');
                hasError = true;
            }

            if (!password) {
                showInputError(loginPasswordInput, loginPasswordError, 'Password is required.');
                hasError = true;
            }

            if (hasError) {
                showMessage(loginMessage, 'Please correct the errors above.', 'error');
                return;
            }

            startLoading(loginBtn, 'Logging in...');

            // Simulate API call delay
            setTimeout(() => {
                const storedUser = localStorage.getItem(`user_${email}`);
                if (storedUser) {
                    const userData = JSON.parse(storedUser);
                    if (userData.password === password) {
                        showMessage(loginMessage, 'Login successful! Please review our policy.', 'success');
                        stopLoading(loginBtn, 'Login');
                        // Set current user email and ID in localStorage
                        localStorage.setItem('currentUserEmail', email);
                        localStorage.setItem('currentUserId', email.replace(/[^a-zA-Z0-9]/g, '_')); // Simple ID from email

                        // Handle "Remember Me"
                        if (rememberMe) {
                            localStorage.setItem('rememberedEmail', email);
                        } else {
                            localStorage.removeItem('rememberedEmail');
                        }
                        
                        // Show policy agreement after successful login
                        setTimeout(showPolicyAgreement, 500); // Small delay for message to be seen
                    } else {
                        showMessage(loginMessage, 'Incorrect password.', 'error');
                        showInputError(loginPasswordInput, loginPasswordError, 'Incorrect password.');
                        stopLoading(loginBtn, 'Login');
                    }
                } else {
                    showMessage(loginMessage, 'User not found. Please register.', 'error');
                    showInputError(loginEmailInput, loginEmailError, 'User not found. Please register.');
                    stopLoading(loginBtn, 'Login');
                }
            }, 1000);
        });

        // Policy Agreement Button Logic
        agreePolicyBtn.addEventListener('click', () => {
            const currentUserEmail = localStorage.getItem('currentUserEmail');
            if (currentUserEmail) {
                localStorage.setItem(`policyAgreed_${currentUserEmail}`, 'true');
                hidePolicyAgreement(); // Hide the policy modal
                showLoadingOverlayFull(); // Show the full-screen loading overlay

                // Redirect after 5 seconds
                setTimeout(() => {
                    window.location.href = 'addup.html';
                }, 5000); // 5000 milliseconds = 5 seconds
            } else {
                showMessage(policyMessage, 'Error: User not identified. Please log in again.', 'error');
                hidePolicyAgreement(); // Hide modal even on error
            }
        });

        disagreePolicyBtn.addEventListener('click', () => {
            showMessage(policyMessage, 'You must agree to the policy to proceed to the dashboard.', 'error');
            // Do not redirect. Keep the user on the login/register page.
            hidePolicyAgreement(); // Hide the modal
            // Optionally clear current user session if disagreement means they can't proceed
            localStorage.removeItem('currentUserEmail');
            localStorage.removeItem('currentUserId');
            // Also clear remembered email if they disagree
            localStorage.removeItem('rememberedEmail');
        });

        // Forgot Password Link Click
        forgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            showForgotPasswordModal();
        });

        // Close Forgot Password Modal Button
        closeForgotPasswordModalBtn.addEventListener('click', () => {
            hideForgotPasswordModal();
        });

        // Submit Forgot Password Email Logic
        submitForgotPasswordEmailBtn.addEventListener('click', () => {
            const email = forgotPasswordEmail.value.trim();
            clearInputError(forgotPasswordEmail, forgotPasswordEmailError);
            forgotPasswordMessage.classList.add('hidden'); // Clear general message

            if (!email) {
                showInputError(forgotPasswordEmail, forgotPasswordEmailError, 'Email address is required.');
                showMessage(forgotPasswordMessage, 'Please enter your email.', 'error');
                return;
            }
            if (!isValidEmail(email)) {
                showInputError(forgotPasswordEmail, forgotPasswordEmailError, 'Please enter a valid email address.');
                showMessage(forgotPasswordMessage, 'Please enter a valid email address.', 'error');
                return;
            }

            startLoading(submitForgotPasswordEmailBtn, 'Checking...');

            setTimeout(() => {
                const storedUser = localStorage.getItem(`user_${email}`);
                if (storedUser) {
                    // Email found, proceed to set new password
                    forgotPasswordEmailSection.classList.add('hidden');
                    setNewPasswordSection.classList.remove('hidden');
                    showMessage(forgotPasswordMessage, 'Email found! Please set your new password.', 'success');
                    // Store the email temporarily for password reset
                    localStorage.setItem('resettingPasswordForEmail', email);
                } else {
                    showMessage(forgotPasswordMessage, 'Email not found. Please check your spelling or register.', 'error');
                    showInputError(forgotPasswordEmail, forgotPasswordEmailError, 'Email not found.');
                }
                stopLoading(submitForgotPasswordEmailBtn, 'Submit Email');
            }, 1000);
        });

        // Set New Password Logic
        setNewPasswordBtn.addEventListener('click', () => {
            const emailToReset = localStorage.getItem('resettingPasswordForEmail');
            const newPass = newPassword.value.trim();
            const confirmNewPass = confirmNewPassword.value.trim();

            clearInputError(newPassword, newPasswordError);
            clearInputError(confirmNewPassword, confirmNewPasswordError);
            forgotPasswordMessage.classList.add('hidden'); // Clear general message

            if (!newPass) {
                showInputError(newPassword, newPasswordError, 'New password is required.');
                showMessage(forgotPasswordMessage, 'Please enter your new password.', 'error');
                return;
            }
            if (newPass.length < 6) {
                showInputError(newPassword, newPasswordError, 'Password must be at least 6 characters long.');
                showMessage(forgotPasswordMessage, 'New password must be at least 6 characters.', 'error');
                return;
            }
            if (newPass !== confirmNewPass) {
                showInputError(confirmNewPassword, confirmNewPasswordError, 'Passwords do not match.');
                showMessage(forgotPasswordMessage, 'New passwords do not match.', 'error');
                return;
            }

            startLoading(setNewPasswordBtn, 'Setting...');

            setTimeout(() => {
                if (emailToReset) {
                    // Update the user's password in localStorage
                    localStorage.setItem(`user_${emailToReset}`, JSON.stringify({ email: emailToReset, password: newPass }));
                    showMessage(forgotPasswordMessage, 'Password successfully reset! You can now log in with your new password.', 'success');
                    localStorage.removeItem('resettingPasswordForEmail'); // Clear temporary email
                    stopLoading(setNewPasswordBtn, 'Set New Password');
                    setTimeout(() => {
                        hideForgotPasswordModal(); // Close modal after success
                        loginEmailInput.value = emailToReset; // Pre-fill login email
                        loginPasswordInput.value = ''; // Clear password field
                    }, 2000);
                } else {
                    showMessage(forgotPasswordMessage, 'Error: No email specified for password reset.', 'error');
                    stopLoading(setNewPasswordBtn, 'Set New Password');
                }
            }, 1000);
        });

        // Initialize "Remember Me" state on page load
        document.addEventListener('DOMContentLoaded', () => {
            const rememberedEmail = localStorage.getItem('rememberedEmail');
            if (rememberedEmail) {
                loginEmailInput.value = rememberedEmail;
                rememberMeCheckbox.checked = true;
            }
        });
    </script>
</body>
</html>
